(this["webpackJsonpkeypath-client"]=this["webpackJsonpkeypath-client"]||[]).push([[0],{114:function(t,e,n){},115:function(t,e,n){},200:function(t,e,n){"use strict";n.r(e);var a=n(11),r=n(8),c=n.n(r),o=n(56),s=n.n(o),i=(n(114),n(115),n(105)),l=n(12),u=n(7),h=n(5),d=n.n(h),p=n(9),O=n(0),b=n(1),j=n(3),f=n(2),g=n(100),v=n(26),m=n.n(v),x=n(20),S=n(102),k=n.n(S),T=n(103),C=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(O.a)(this,n),(t=e.call(this)).SESSION_ID=void 0,t.API_ROOT="http://localhost:8080/",t.PATH_ORIGIN=0,t.PATH_DESTINATION=83,t.synthStack=[],t.midi=void 0,t.graphData={},t.chordCount=0,t.loadGraphData=Object(p.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 83,0,t.PATH_DESTINATION=Math.floor(84*Math.random()+0),e.next=5,m.a.get("".concat(t.API_ROOT,"graph/").concat(t.SESSION_ID,"/").concat(t.PATH_ORIGIN,"/").concat(t.PATH_DESTINATION));case 5:n=e.sent,t.graphData=n.data,t.PATH_ORIGIN=n.data.destination;case 8:case"end":return e.stop()}}),e)}))),t.loadMidiData=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Midi.fromUrl(t.graphData.midi);case 2:t.midi=e.sent;case 3:case"end":return e.stop()}}),e)}))),t.renderGraph=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState(Object(u.a)(Object(u.a)({},t.state),{},{data:t.graphData,loading:!1}));case 1:case"end":return e.stop()}}),e)}))),t.initAudio=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadGraphData();case 2:return e.next=4,t.loadMidiData();case 4:return e.next=6,t.startSeqence();case 6:return e.next=8,t.renderGraph();case 8:x.d.bpm.value=60,x.d.start();case 10:case"end":return e.stop()}}),e)}))),t.startSeqence=Object(p.a)(d.a.mark((function e(){var n,a,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("START-SEQUENCE"),t.synthStack.length>0&&(console.log("this.synthStack.length",t.synthStack.length),t.synthStack[t.synthStack.length-1].unsync()),n=new x.b(x.a),t.synthStack.push(n),n.toDestination(),n.volume.value=-20,a=t.midi.tracks[0],r=a.notes,c=-1,o=0;o<r.length;o++)o==r.length-1&&(console.log("NOTE TIME: ",r[o]),console.log("NOTE TIME: ",r[o].time),console.log("NOTE DUR: ",r[o].duration)),r[o].time!==c&&(c=r[o].time,t.chordCount++),n.triggerAttackRelease(r[o].name,r[o].duration,x.e()+r[o].time,.5);console.log("TIME.NOW(): ",x.e()),console.log("CHORD COUNT: ",t.chordCount),x.d.scheduleOnce(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOAD DATA"),e.next=3,t.loadGraphData();case 3:return e.next=5,t.loadMidiData();case 5:case"end":return e.stop()}}),e)}))),new x.c(t.chordCount-1+":0:0")),x.d.scheduleOnce(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ALL FINISHED"),e.next=3,t.startSeqence();case 3:return e.next=5,t.renderGraph();case 5:case"end":return e.stop()}}),e)}))),new x.c(t.chordCount+":0:0"));case 14:case"end":return e.stop()}}),e)}))),t.SESSION_ID=k()(),t.state={divStyle:{color:"blue"},loading:!0,data:{nodes:[{id:99,hkey:"as",note:"as",chord:"maj7",keyAndNote:"as,as-maj7",color:"pink",labelText:"as,as-maj7"}],links:[]},myConfig:{initialZoom:1,height:900,width:1200,node:{labelProperty:function(t){return t.labelText},renderLabel:!0,size:120,highlightStrokeColor:"black"},link:{highlightColor:"lightblue"}}},t}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 83,0,this.PATH_DESTINATION=Math.floor(84*Math.random()+0),t.next=5,m.a.get("".concat(this.API_ROOT,"graph/").concat(this.SESSION_ID,"/").concat(this.PATH_ORIGIN,"/").concat(this.PATH_DESTINATION));case 5:e=t.sent,this.PATH_ORIGIN=e.data.destination,this.setState(Object(u.a)(Object(u.a)({},this.state),{},{data:e.data,loading:!1}));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)("div",{style:this.state.divStyle,children:[Object(a.jsx)("button",{onClick:this.initAudio,children:"Click me"}),this.state.loading?Object(a.jsx)("div",{children:"Loading..."}):Object(a.jsx)(g.Graph,{id:"graph-id",data:this.state.data,config:this.state.myConfig})]})}}]),n}(c.a.Component),w=n(6),I=n(104),N=n.n(I),y={width:"100%",height:"80vh"},D=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(O.a)(this,n),(a=e.call(this,t)).createNewNode=function(t){return{name:t.toString(),children:[],attributes:{},left:void 0,right:void 0}},a.cloneTree=function(t){if(null==t)return null;var e=a.createNewNode(t.value);e.left=a.cloneTree(t.left);var n=a.cloneTree(t.left),r=0;n&&(e.children[r]=n,r++),e.right=a.cloneTree(t.right);var c=a.cloneTree(t.right);return c&&(e.children[r]=c),e},a.componentDidUpdate=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("state was set");case 1:case"end":return t.stop()}}),t)}))),a.componentDidMount=Object(p.a)(d.a.mark((function t(){var e,n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("http://localhost:8080/tree");case 2:e=t.sent,n=a.cloneTree(e.data.root),r=[JSON.parse(JSON.stringify(n))],c=a.treeContainer.getBoundingClientRect(),a.setState(Object(u.a)(Object(u.a)({},a.state),{},{tree:r,translate:{x:c.width/2,y:c.height/5}}));case 7:case"end":return t.stop()}}),t)}))),a.handleSubmit=function(){var t=Object(p.a)(d.a.mark((function t(e){var n,r,c,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,m.a.post("http://localhost:8080/tree",{data:a.state.value});case 3:return t.sent,t.next=6,m.a.get("http://localhost:8080/tree");case 6:n=t.sent,r=a.cloneTree(n.data.root),c=[JSON.parse(JSON.stringify(r))],o=a.treeContainer.getBoundingClientRect(),a.setState(Object(u.a)(Object(u.a)({},a.state),{},{tree:c,translate:{x:o.width/2,y:o.height/5}}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.state={value:void 0,tree:[{name:"100",children:[]}]},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a}return Object(b.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{value:t.target.value}))}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{style:y,ref:function(e){return t.treeContainer=e},children:[Object(a.jsx)(N.a,{data:this.state.tree,orientation:"vertical",collapsible:!1,translate:this.state.translate}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("label",{children:["ADD NODE:",Object(a.jsx)("input",{type:"text",value:this.state.value,onChange:this.handleChange})]}),Object(a.jsx)("input",{type:"submit",value:"Submit"})]})]})}}]),n}(c.a.Component),A=n(59),E=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(O.a)(this,n),(a=e.call(this,t)).componentDidMount=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),a.state={},a}return Object(b.a)(n,[{key:"render",value:function(){var t=this;this.state.bgcolor;return Object(a.jsx)("button",{onClick:function(){t.props.handleColorChange(t.props.color)},children:this.props.color})}}]),n}(c.a.Component),_=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(O.a)(this,n),(a=e.call(this,t)).componentDidMount=Object(p.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("http://localhost:8080/colors");case 2:if((e=t.sent).data){t.next=5;break}return t.abrupt("return");case 5:a.setState(Object(u.a)(Object(u.a)({},a.state),{},{colors:e.data}));case 6:case"end":return t.stop()}}),t)}))),a.handleColorChange=function(t){a.setState(Object(u.a)(Object(u.a)({},a.state),{},{bgcolor:t}))},a.state={colors:["pink"],bgcolor:"grey"},a}return Object(b.a)(n,[{key:"render",value:function(){var t=this,e={backgroundColor:this.state.bgcolor,height:"100vh"};return Object(a.jsxs)("div",{style:e,children:[JSON.stringify(this.state.colors),Object(a.jsx)(A.a,{children:this.state.colors.map((function(e){return Object(a.jsx)(E,{color:e,handleColorChange:t.handleColorChange},e)}))})]})}}]),n}(c.a.Component);var M=function(){return Object(a.jsx)(i.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(l.a,{path:"/",exact:!0,component:C}),Object(a.jsx)(l.a,{path:"/tree",exact:!0,component:D}),Object(a.jsx)(l.a,{path:"/color",exact:!0,component:_})]})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),c(t),o(t)}))};n(198);s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root")),P()}},[[200,1,2]]]);
//# sourceMappingURL=main.f79e0a52.chunk.js.map